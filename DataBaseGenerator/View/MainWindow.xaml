<mah:MetroWindow
    x:Class="DataBaseGenerator.UI.Wpf.View.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mah="http://metro.mahapps.com/winfx/xaml/controls"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:viewmodels="clr-namespace:DataBaseGenerator.UI.Wpf.ViewModel"
    Title="DataBase Generator"
    Width="1139"
    Height="850"
    d:DataContext="{d:DesignInstance viewmodels:MainViewModel}"
    Icon="{Binding PathToIcon}"
    WindowStartupLocation="CenterScreen"
    WindowStyle="ThreeDBorderWindow"
    mc:Ignorable="d">


    <Window.InputBindings>
        <KeyBinding Command="{Binding HotkeyForDialogWindowCommand}" Gesture="Ctrl+O" />
        <KeyBinding Command="{Binding HotkeyExitFromProgramCommand}" Gesture="Alt+X" />
    </Window.InputBindings>

    <Grid ShowGridLines="False">

        <Grid.Resources>
            <Style BasedOn="{StaticResource {x:Type Button}}" TargetType="{x:Type Button}">
                <Setter Property="Background" Value="{DynamicResource MahApps.Brushes.Accent}" />
            </Style>
        </Grid.Resources>

        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <Grid.ColumnDefinitions>
            <ColumnDefinition />
            <ColumnDefinition />
            <ColumnDefinition />
            <ColumnDefinition />
        </Grid.ColumnDefinitions>

        <Grid
            Name="MenuPanel"
            Grid.Row="0"
            Grid.Column="0"
            Grid.ColumnSpan="4"
            Margin="5,5,5,0">

            <Border>
                <StackPanel>
                    <Menu x:Name="ContextMenu">
                        <MenuItem BorderBrush="{DynamicResource MahApps.Brushes.Accent}" Header="File">
                            <MenuItem Header="Новый (Ctrl + N)" />
                            <MenuItem Header="Открыть (Ctrl + Open)" />
                            <MenuItem Header="Сохранить (Ctrl + S)" />
                            <MenuItem Header="Сохранить как... (Ctrl + N)" />
                            <MenuItem Header="Печать (Ctrl + P)" />
                            <MenuItem Command="{Binding HotkeyExitFromProgramCommand}" Header="Выход (Alt + X)" />
                        </MenuItem>
                        <MenuItem BorderBrush="{DynamicResource MahApps.Brushes.Accent}" Header="View">
                            <MenuItem Header="Поверх всех окон" />
                            <MenuItem Header="Вкладки во весь Экран" />
                            <MenuItem Header="Масштаб текста">
                                <MenuItem Header="Крупнее" />
                                <MenuItem Header="Мельче" />
                                <MenuItem Header="Восстановить масштаб..." />
                            </MenuItem>
                            <MenuItem Header="Свернуть все окна" />
                        </MenuItem>
                        <MenuItem BorderBrush="{DynamicResource MahApps.Brushes.Accent}" Header="Options">
                            <MenuItem Header="Настройки..." />
                            <MenuItem Header="Импортировать" />
                            <MenuItem Header="Экспортировать" />
                            <MenuItem Header="Удалить программу" />
                        </MenuItem>
                        <MenuItem BorderBrush="{DynamicResource MahApps.Brushes.Accent}" Header="Tools">
                            <MenuItem Header="MD5">
                                <MenuItem Header="Сгенерировать" />
                                <MenuItem Header="Не генерировать" />
                                <MenuItem Header="Лучше вообще не трогать" />
                            </MenuItem>
                            <MenuItem Header="SHA-256">
                                <MenuItem Command="{Binding ToolMessageCommand}" Header="Не нажимать" />
                            </MenuItem>
                        </MenuItem>
                        <MenuItem BorderBrush="{DynamicResource MahApps.Brushes.Accent}" Header="Plugins">
                            <MenuItem Header="Плагин мастерства" />
                            <MenuItem Header="Просто плагин" />
                            <MenuItem Header="Бла-Бла плагин" />
                            <MenuItem Header="Управление плагинами" />
                            <MenuItem Header="Открыть папку плагинов" />
                        </MenuItem>
                        <MenuItem BorderBrush="{DynamicResource MahApps.Brushes.Accent}" Header="Help">
                            <MenuItem Command="{Binding OpenSpecificationWindowCommand}" Header="Вызвать справку" />
                            <MenuItem Command="{Binding AboutProgramCommand}" Header="О программе...  (Ctrl+O)" />
                        </MenuItem>
                    </Menu>
                </StackPanel>
            </Border>
        </Grid>

        <Grid
            Name="AddPatients"
            Grid.Row="1"
            Grid.RowSpan="9"
            Grid.Column="0"
            Margin="5,5,5,5">

            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <Border
                Grid.Row="0"
                BorderBrush="{DynamicResource MahApps.Brushes.Accent}"
                BorderThickness="5">
                <StackPanel>

                    <TextBlock
                        Margin="5,5,0,0"
                        FontWeight="DemiBold"
                        Text="Patient ID *" />
                    <TextBox Margin="5" Text="{Binding AddIdPatient, Mode=TwoWay}" />

                    <TextBlock
                        Margin="5,5,0,0"
                        FontWeight="DemiBold"
                        Text="Surname: *" />
                    <TextBox Margin="5" Text="{Binding AddFamily, Mode=TwoWay}" />

                    <TextBlock
                        Margin="5,5,0,0"
                        FontWeight="DemiBold"
                        Text="Name: *" />
                    <TextBox Margin="5" Text="{Binding AddName, Mode=TwoWay}" />

                    <TextBlock
                        Margin="5,5,0,0"
                        FontWeight="DemiBold"
                        Text="Middle name: *" />
                    <TextBox Margin="5" Text="{Binding AddMiddleName, Mode=TwoWay}" />

                    <TextBlock
                        Margin="5,5,0,0"
                        FontWeight="DemiBold"
                        Text="Birthdate:" />
                    <mah:DateTimePicker
                        Margin="5"
                        Culture="ru"
                        SelectedDateFormat="Short"
                        SelectedDateTime="{Binding PatientBirthDate, Mode=TwoWay}"
                        SelectedTimeFormat="Long" />

                    <TextBlock
                        Margin="5,5,0,0"
                        FontWeight="DemiBold"
                        Text="Gender:" />
                    <ComboBox
                        Margin="5"
                        ItemsSource="{Binding Gender}"
                        SelectedItem="{Binding SelecedGender}" />

                    <TextBlock
                        Margin="5,5,0,0"
                        FontWeight="DemiBold"
                        Text="Address:" />
                    <TextBox Margin="5" Text="{Binding AddAdress, Mode=TwoWay}" />

                    <TextBlock
                        Margin="5,5,0,0"
                        FontWeight="DemiBold"
                        Text="Place of work" />
                    <TextBox Margin="5" Text="{Binding AddWorkPlase, Mode=TwoWay}" />

                    <TextBlock
                        Margin="5,5,0,0"
                        FontWeight="DemiBold"
                        Text="Additional information:" />
                    <TextBox
                        Height="217"
                        Margin="5"
                        Text="{Binding AddInfo, Mode=TwoWay}"
                        TextWrapping="Wrap" />

                </StackPanel>
            </Border>

            <Button
                Grid.Row="1"
                Width="70"
                Height="50"
                Margin="50,10,0,0"
                HorizontalAlignment="Left"
                Command="{Binding AddOnePatientCommand}"
                Content="Add" />
            <Button
                Grid.Row="1"
                Width="70"
                Height="50"
                Margin="0,10,50,0"
                HorizontalAlignment="Right"
                Command="{Binding CancelAddPatientCommand}"
                Content="Cancel" />
        </Grid>

        <Grid
            Name="PatientTable"
            Grid.Row="1"
            Grid.Column="1"
            Grid.ColumnSpan="3"
            Margin="5"
            Background="{DynamicResource MahApps.Brushes.Accent}">

            <DataGrid
                Name="ViewAllPatient"
                Margin="5"
                AutoGenerateColumns="False"
                CanUserAddRows="False"
                CanUserDeleteRows="False"
                IsReadOnly="False"
                ItemsSource="{Binding AllPatients}"
                SelectedItem="{Binding SelectedPatient, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">

                <DataGrid.Columns>
                    <DataGridTextColumn
                        Binding="{Binding PatientID}"
                        Header="ID"
                        IsReadOnly="True" />
                    <DataGridTextColumn Binding="{Binding LastName}" Header="Фамилия" />
                    <DataGridTextColumn Binding="{Binding FirstName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Header="Имя" />
                    <DataGridTextColumn Binding="{Binding MiddleName}" Header="Отчество" />
                    <DataGridTextColumn Binding="{Binding BirthDate}" Header="Дата Рождения" />
                    <DataGridTextColumn Binding="{Binding Sex}" Header="Пол" />
                    <DataGridTextColumn Binding="{Binding Address}" Header="Адрес" />
                    <DataGridTextColumn Binding="{Binding AddInfo}" Header="Доп. информация" />
                    <DataGridTextColumn Binding="{Binding Occupation}" Header="Место работы" />
                </DataGrid.Columns>
            </DataGrid>
        </Grid>

        <Grid
            Grid.Row="2"
            Grid.Column="1"
            Grid.ColumnSpan="3">

            <Grid.ColumnDefinitions>
                <ColumnDefinition />
                <ColumnDefinition />
                <ColumnDefinition />
                <ColumnDefinition />
            </Grid.ColumnDefinitions>

            <Grid Grid.Column="0" Margin="5">
                <StackPanel Orientation="Vertical">
                    <CheckBox
                        Margin="5"
                        Content="Eng Names"
                        FontSize="12"
                        FontWeight="Bold"
                        IsChecked="{Binding UseEngNames}" />
                    <CheckBox
                        Margin="5"
                        Content="Rus Names"
                        FontSize="12"
                        FontWeight="Bold"
                        IsChecked="{Binding UseRusNames}" />
                    <CheckBox
                        Margin="5"
                        Content="China Names"
                        FontSize="12"
                        FontWeight="Bold"
                        IsChecked="{Binding UseChinaNames}" />
                </StackPanel>
            </Grid>

            <Grid Grid.Column="1" Margin="5">
                <StackPanel Orientation="Vertical">
                    <CheckBox
                        Margin="5"
                        Content="Empty strings"
                        FontSize="12"
                        FontWeight="Bold"
                        IsChecked="{Binding UseEmptyStrings}" />
                    <CheckBox
                        Margin="5"
                        Content="Long values"
                        FontSize="12"
                        FontWeight="Bold"
                        IsChecked="{Binding UseLongValues}" />
                    <CheckBox
                        Margin="5"
                        Content="Special characters"
                        FontSize="12"
                        FontWeight="Bold"
                        IsChecked="{Binding UseSpecialChars}" />
                </StackPanel>
            </Grid>

            <Grid
                Grid.Column="2"
                Grid.ColumnSpan="2"
                Margin="5">
                <StackPanel Orientation="Vertical">
                    <RadioButton
                        Margin="5"
                        Content="Random birthdate"
                        FontSize="12"
                        FontWeight="Bold"
                        GroupName="BirthdateSection"
                        IsChecked="{Binding UseRandomBirthdate}" />
                    <RadioButton
                        Margin="5"
                        Content="Missing birthdate"
                        FontSize="12"
                        FontWeight="Bold"
                        GroupName="BirthdateSection"
                        IsChecked="{Binding UseMissingBirthdate}" />
                    <RadioButton
                        Margin="5"
                        Content="Future birthdate"
                        FontSize="12"
                        FontWeight="Bold"
                        GroupName="BirthdateSection"
                        IsChecked="{Binding UseFutureBirthdate}" />
                </StackPanel>
            </Grid>

            <Grid Grid.Column="3" Margin="5">
                <StackPanel Orientation="Vertical">
                    <RadioButton
                        Margin="5"
                        Content="0 - 17 years"
                        FontSize="12"
                        FontWeight="Bold"
                        GroupName="BirthdateSection"
                        IsChecked="{Binding UseAge0_17}" />
                    <RadioButton
                        Margin="5"
                        Content="18 - 60 years"
                        FontSize="12"
                        FontWeight="Bold"
                        GroupName="BirthdateSection"
                        IsChecked="{Binding UseAge18_60}" />
                    <RadioButton
                        Margin="5"
                        Content="61 - 120 years"
                        FontSize="12"
                        FontWeight="Bold"
                        GroupName="BirthdateSection"
                        IsChecked="{Binding UseAge61_120}" />
                </StackPanel>
            </Grid>
        </Grid>

        <Grid
            Name="TextBoxPatientCount"
            Grid.Row="3"
            Grid.Column="1"
            Margin="5">

            <TextBlock
                Name="PatCount"
                Margin="5"
                HorizontalAlignment="Left"
                VerticalAlignment="Center"
                FontSize="15"
                FontWeight="Bold"
                Text="Patient Count" />

            <TextBox
                Name="PatientCount"
                Width="100"
                Height="50"
                Margin="0,0,30,0"
                HorizontalAlignment="Right"
                HorizontalContentAlignment="Center"
                VerticalContentAlignment="Center"
                Background="{DynamicResource MahApps.Brushes.Button.Border}"
                FontWeight="Bold"
                Text="{Binding SetPatientCount, UpdateSourceTrigger=PropertyChanged}" />

        </Grid>

        <Grid
            Name="ButtonAddPatient"
            Grid.Row="3"
            Grid.Column="2"
            Margin="5">

            <Button
                Name="AddPatient"
                Width="80"
                Height="50"
                HorizontalAlignment="Left"
                Command="{Binding AddPatientCommand}">
                <TextBlock
                    Margin="5,0"
                    FontSize="10"
                    Text="ADD PATIENT"
                    TextAlignment="Center"
                    TextWrapping="Wrap" />
            </Button>

            <Button
                Name="SavePatient"
                Width="80"
                Height="50"
                HorizontalAlignment="Center"
                Command="{Binding SavePatientsCommand}">
                <TextBlock
                    Margin="5,0"
                    FontSize="10"
                    Text="SAVE PATIENT"
                    TextAlignment="Center"
                    TextWrapping="Wrap" />
            </Button>

            <Button
                Name="UpdatePatient"
                Width="80"
                Height="50"
                HorizontalAlignment="Right"
                Command="{Binding RefreshPatientsCommand}">
                <TextBlock
                    FontSize="10"
                    Text="UPDATE PATIENT"
                    TextAlignment="Center"
                    TextWrapping="Wrap" />
            </Button>
        </Grid>

        <Grid
            Name="ButtonDeleteFirstPatient"
            Grid.Row="3"
            Grid.Column="3"
            Margin="5">
            <Button
                Name="DeleteFirstPatient"
                Width="80"
                Height="50"
                HorizontalAlignment="Left"
                Command="{Binding CleanCheckboxesCommand}">
                <TextBlock
                    FontSize="10"
                    Text="CLEAN CHECKBOX"
                    TextAlignment="Center"
                    TextWrapping="Wrap" />
            </Button>

            <Button
                Name="CleanCheckbox"
                Width="80"
                Height="50"
                HorizontalAlignment="Center"
                Command="{Binding DeleteFirstPatientCommand}">
                <TextBlock
                    Margin="5,0"
                    FontSize="10"
                    Text="DELETE FIRST"
                    TextAlignment="Center"
                    TextWrapping="Wrap" />
            </Button>

            <Button
                Name="DeleteAllPatient"
                Width="80"
                Height="50"
                Margin="0,0,5,0"
                HorizontalAlignment="Right"
                Command="{Binding DeleteAllPatientCommand}">
                <TextBlock
                    Margin="10,0"
                    FontSize="10"
                    Text="DELETE ALL"
                    TextAlignment="Center"
                    TextWrapping="Wrap" />
            </Button>
        </Grid>

        <Grid
            Name="WorkListTable"
            Grid.Row="4"
            Grid.Column="1"
            Grid.ColumnSpan="3"
            Margin="5"
            Background="{DynamicResource MahApps.Brushes.Accent}">

            <ListView
                Name="ViewAllWorkList"
                Margin="5"
                ItemsSource="{Binding AllWorkLists}">

                <ListView.View>
                    <GridView>

                        <GridViewColumn DisplayMemberBinding="{Binding ID_Patient}" Header="ID пациента" />

                        <GridViewColumn DisplayMemberBinding="{Binding Modality}" Header="Модальность" />

                        <GridViewColumn DisplayMemberBinding="{Binding StationAeTitle}" Header="AE_Title" />

                        <GridViewColumn DisplayMemberBinding="{Binding State}" Header="Состояние" />

                        <GridViewColumn DisplayMemberBinding="{Binding StudyDescription}" Header="Описание" />

                        <GridViewColumn DisplayMemberBinding="{Binding CreateDate}" Header="Дата добавления" />

                        <GridViewColumn DisplayMemberBinding="{Binding CreateTime}" Header="Время добавления" />

                        <!--<GridViewColumn Header="CompleteDate"
                                        DisplayMemberBinding="{Binding CompleteDate}" />

                        <GridViewColumn Header="CompleteTime"
                                        DisplayMemberBinding="{Binding CompleteTime}" />-->

                        <!--<GridViewColumn Header="SOPInstanceUID"
                                        DisplayMemberBinding="{Binding SOPInstanceUID}" />-->

                        <GridViewColumn DisplayMemberBinding="{Binding ProcedureStepStartDateTime}" Header="Дата процедуры" />

                        <GridViewColumn DisplayMemberBinding="{Binding PerformingPhysiciansName}" Header="Исполнит. врач" />

                        <GridViewColumn DisplayMemberBinding="{Binding ReferringPhysiciansName}" Header="Направ. врач" />

                        <GridViewColumn DisplayMemberBinding="{Binding RequestingPhysician}" Header="Запрос. врач" />

                    </GridView>
                </ListView.View>
            </ListView>
        </Grid>

        <Grid
            Name="TextBoxWorkListCount"
            Grid.Row="5"
            Grid.Column="1"
            Margin="5">

            <TextBlock
                Name="WlCount"
                Margin="5"
                HorizontalAlignment="Left"
                VerticalAlignment="Center"
                FontSize="15"
                FontWeight="Bold"
                Text="WorkList Count" />

            <TextBox
                Name="WorkListCount"
                Width="100"
                Height="50"
                Margin="0,0,30,0"
                HorizontalAlignment="Right"
                HorizontalContentAlignment="Center"
                VerticalContentAlignment="Center"
                Background="{DynamicResource MahApps.Brushes.Button.Border}"
                FontWeight="Bold"
                Text="{Binding SetWorkListCount, UpdateSourceTrigger=PropertyChanged}" />
        </Grid>

        <Grid
            Name="TextBoxModality"
            Grid.Row="5"
            Grid.Column="2"
            Margin="5">

            <TextBlock
                Name="Modality"
                Margin="40,0,0,0"
                HorizontalAlignment="Left"
                VerticalAlignment="Center"
                FontSize="15"
                FontWeight="Bold"
                Text="Modality" />

            <ComboBox
                Name="ModalityBox"
                Width="100"
                Height="50"
                Margin="0,0,30,0"
                HorizontalAlignment="Right"
                HorizontalContentAlignment="Center"
                VerticalContentAlignment="Center"
                Background="{DynamicResource MahApps.Brushes.Button.Border}"
                FontWeight="Bold"
                ItemsSource="{Binding ModalityRules}"
                SelectedItem="{Binding SelectModality, Mode=TwoWay}" />
        </Grid>

        <Grid
            Name="TextBoxAeTitle"
            Grid.Row="5"
            Grid.Column="3"
            Margin="5,0,10,0">

            <TextBlock
                Name="AeTitle"
                Margin="30,0,0,0"
                HorizontalAlignment="Left"
                VerticalAlignment="Center"
                FontSize="15"
                FontWeight="Bold"
                Text="AE Title" />
            <TextBox
                Name="AeTitleBox"
                Width="150"
                Height="50"
                HorizontalAlignment="Right"
                HorizontalContentAlignment="Center"
                VerticalContentAlignment="Center"
                mah:TextBoxHelper.Watermark="Enter title:"
                Background="{DynamicResource MahApps.Brushes.Button.Border}"
                FontWeight="Bold"
                Text="{Binding SetAeTitle, UpdateSourceTrigger=PropertyChanged}" />
        </Grid>


        <Grid
            Name="ButtonAddWorkList"
            Grid.Row="6"
            Grid.Column="1"
            Margin="5">

            <Button
                Name="AddWorkList"
                Width="120"
                Height="50"
                Margin="5,0,0,0"
                HorizontalAlignment="Left"
                Command="{Binding AddWorkListCommand}"
                Content="Add WorkList" />

            <Button
                Name="UpdateWorkList"
                Grid.Column="0"
                Width="120"
                Height="50"
                Margin="0,0,10,0"
                HorizontalAlignment="Right"
                Command="{Binding RefreshWorkListCommand}"
                Content="Update WorkList" />
        </Grid>


        <Grid
            Name="ButtonDeleteFirstWorkList"
            Grid.Row="6"
            Grid.Column="3"
            Margin="5,0,10,0">

            <Button
                Name="DeleteFirstWorkList"
                Width="120"
                Height="50"
                Margin="15,0,0,0"
                HorizontalAlignment="Left"
                Command="{Binding DeleteFirstWorkListCommand}"
                Content="Delete First WL" />

            <Button
                Name="DeleteAllWorkList"
                Width="120"
                Height="50"
                HorizontalAlignment="Right"
                Command="{Binding DeleteAllWorkListCommand}"
                Content="Delete All WL" />
        </Grid>


        <Grid
            Name="ViewUpdateText"
            Grid.Row="7"
            Grid.Column="1"
            Grid.ColumnSpan="3"
            Margin="5"
            Background="{DynamicResource MahApps.Brushes.Accent}">

            <TextBox
                Name="UpdateText"
                Height="50"
                Margin="5"
                HorizontalContentAlignment="Center"
                VerticalContentAlignment="Center"
                FontSize="22"
                IsReadOnly="True"
                Text="{Binding UpdateText, UpdateSourceTrigger=PropertyChanged}" />

        </Grid>


        <Grid
            Name="ButtonConnect"
            Grid.Row="8"
            Grid.Column="1"
            Margin="5">

            <Button
                Name="Connect"
                Width="120"
                Height="50"
                Margin="5,0,0,0"
                HorizontalAlignment="Left"
                Command="{Binding ConnectDBCommand}"
                Content="Connect" />        

            <Button
                Name="OpenWeb"
                Width="120"
                Height="50"
                
                Margin="0,0,10,0"
                HorizontalAlignment="Right"
                Command="{Binding OpenWebPageCommand}"
                Content="Web version" />
        </Grid>

        <Grid
            Name="ButtonSelect"
            Grid.Row="8"
            Grid.Column="3"
            Margin="5">

            <Button
                Name="Delete"
                Width="150"
                Height="50"
                HorizontalAlignment="Center"
                Command="{Binding DeleteAllTablesCommand}"
                Content="Delete all tables" />
        </Grid>
    </Grid>
</mah:MetroWindow>
